<html lang="en">

    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="css/css-style.css">
        <title>ASDL IoT Datapage</title>
        <link rel="icon" href="https://www.asdl.gatech.edu/images/favicon.png">
    </head>

    <body onload="refreshCharts()">        
        <div id="large-header">
            <div id="large-header-container">
                <div id="large-wordmark"><a href="index.html"><img src="images/ASDL-Logo_Main%20Logo.svg"></a></div>
            </div>
            <div id="menu-header-container">
                <div id="web-menu">
                    <div id="small-cta">
                        <a class="menu-button" href="index.html#SensorListLink">Project List</a>
                    </div> 
                    <div id="small-spacer"></div>
                    <div id="small-spacer"></div>
                    <div id="small-cta">
                        <a class="menu-button" href="index.html#AboutLink">About Us</a>
                    </div> 
                    <div id="small-spacer"></div>
                    <div id="small-spacer"></div>
                    <div id="small-cta">
                        <a class="menu-button" href="index.html#ExtLink">External Links</a>
                    </div> 
                    <div id="small-spacer"></div>
                    <div id="small-spacer"></div>
                    <div id="small-cta">
                        <a class="menu-button" href="https://forms.office.com/Pages/ResponsePage.aspx?id=u5ghSHuuJUuLem1_Mvqgg7kibaa985pOnmfQIWOFmjNUN0VDWEkzVkFSSVAzOVJPSjA0SjU5N0M2RC4u" target="_blank">Join the Team</a>
                    </div> 
                    <div id="small-spacer"></div>
                </div>
            </div>  
        </div>




        <div id="main-container">



            <div id = "mid-buffer"></div>
            <div id="main">
                <div class="anchor" id="home"></div><h1 id="header-light">Home</h1>
                <p id="text-light">This is the Home Page for the ASDL IoT Development Project. This team is developing a series of sensors for use across multiple applications to connect Georgia Tech's campus, and more. Real-time sensor data can be found from any of the online sensors in the <b>Project List</b>. If you want to learn more about how this project works, visit the <b>About Us</b> tab.</p>
                <p id = "text-light">This is an ongoing project through Georgia Tech's Aerospace Systems Design Lab. If you are interested in becoming part of the team, reach out through the <b>Join the Team</b> button.</p>
                <p id = "text-light">This webpage, the hardware that collects its data, and its backend data processing is the work of Alex Lomis (Fall 2022 - Spring 2023).</p>
            </div>
            <div id = "mid-buffer"></div>
            <div id = "mid-buffer"></div>

            <div id="sensor-vitals-section">
                <div id="price-content">
                    <div class="anchor" id="SensorListLink"></div><h1 id="header-light-dark">Project List</h1>
                    <p id="text-light-dark" >A list of current projects and their rough purpose can be found below. Next to each sensor is a meter that shows the last time a sensor from this project posted data. This is a good metric as to whether the project is currently online. Note that sensors only update data on 10-15 minute intervals. <b>Click on a project's name</b> to view more specifics about what it does, what sensors are on it, and its recorded data.</p>
                    <div id = "mid-buffer"></div>
                    <p id="text-light-dark" >The CNES Air Quality project uses a set of five 4G-LTE connnected air quality sensors to monitor the Georgia Tech Carbon-Neutral Energy Solutions Laboratory. Click on the project to see what kind of data the sensors collect!</p>
                    <div id = "mid-buffer"></div>
                    <p id="text-light-dark" >The Building Occupancy project uses sensors across the entryways of buildings to estimate the number of people that enter and exit. This is a work-in-progress and currently only has one sensor connected (for testing purposes).</p>
                </div>


                <div id="row">
                    <div id="halftitles">
                        <div id="small-cta">
                            <a class="sensor-button" id="CNES Air Quality" type="button" href="CNES.html">CNES Air Quality</a>
                        </div>  
                    </div>
                    <div id="large-spacer"></div>
                    <div id="halftitles">
                        <div id="small-cta">
                            <a class="ping-button" type="button" id="LP1"> </a>
                        </div>

                    </div>
                </div>

                <div id="row">
                    <div id="halftitles">
                        <div id="small-cta">
                            <a class="sensor-button" type="button" href="PC.html">Building Occupancy</a>
                        </div>  
                    </div>
                    <div id="large-spacer"></div>
                    <div id="halftitles">


                        <div id="small-cta">
                            <a class="ping-button" type="button" id="LP2"> </a>
                        </div>


                    </div>
                </div>

                <div id = "mid-buffer"></div>                
            </div>


            <!--Each ThingSpeak Chart-->
            <div id = "mid-buffer"></div>
            <div id="main">
                <div class="anchor" id="AboutLink"></div><h1 id="header-light">About the Projects</h1>
                <p id="text-light">These projects seek to provide lower-cost, higher-reliability Internet of Things (IoT) connected sensors to help improve the efficiency of building operations. This data allows building operations to operate proactively rather than reactively. By finding ways to improve upon the uptime and ease-of-setup of these IoT devices, more data can be collected with less effort.</p>
                <p id="text-light">One of the primary hurdles to overcome with uptime reliability is with communication protocol. Hard wired devices have a high setup difficulty, and low flexibility. Wi-Fi devices are easier to set up, but must be placed indoors, and are dependent on the Wi-Fi reliability of the building. We sought to use 4G-LTE connected devices to gain even more flexibility than Wi-Fi. By using 4G-LTE, data can be pushed from anywhere within the carrier's coverage range. The device can be moved anywhere within a building, to another building, or placed outside - where access points can't reach. </p>
                <p id="text-light">Operating outside of Wi-Fi also has the benefit of being able to sustain operations through power or network outages. The projects featured here have built-in battery supplies, allowing them to operate for days without input power. Through firmware improvements, this off-wall time can be improved to weeks. Because the device can report its power status with the other data, these sensors can also be used to detect and monitor power outages and solar panel power intake.</p>
                <p id="text-light">The challenge with cellular-based systems is the need for a custom data processing backend. Existing on a campus' local network allows data to be easily published and stored in a local server. Operating off-network means that this processing must be done through third-parties to achieve the same effect. A flow chart of our process is shown below.
                
                <div id = "mid-buffer"></div>
                
                <div id="thingspeakcharts">
                    <img src="images/flow.png">
                </div>
                
                <p id="text-light">In general, the hardware falls under the "Local Services" category. This portion of the flow chart describes the systems that are responsible for measuring, processing, and transmitting data. One of the internal air quality (CNES) boards would be a local device. This device uses a 4G provider to send data, on a specified interval, to the "Cloud Services" category. In this category, data is received from the sensors, stored, and published to other necessary services. The "Sensor Console" is a combined management tool that allows us to observe the health of a given fleet of sensors, reset devices remotely, and observe raw incoming data streams. The "Sensor Cloud" is then responsible for publishing data to other services, and Over the Air (OTA) programming. This feature allows us to update and reprogram devices completely remotely, even if they are installed on site. This section is also where we use webhooks to send our data to our visualizer and data storage repositories. Lastly, this website displays the visualized data, acting as the final step in the interface between the physical sensor and the user. </p>
                <p id="text-light">While these systems have only been applied to the two projects listed, they have been set up in a versatile way and could be applied to a number of other projects. The capability of the cellular systems has  thus far proven highly reliabile, with a 100% success rate in data publishes since setting up these devices. This rate may be affected by especially poor cellular performance (such as in basements), but future firmware updates could improve the likelihood of success in those environments.</p>
                <p id="text-light">If you are interested in learning more about this project, or the other projects the greater EnergyWatch team works on, feel free to click the "Join the Team" button, or scroll through the ASDL EnergyWatch page below.</p>
                <div id = "mid-buffer"></div>
                
            </div>
            <div id = "mid-buffer"></div>




            <div id="price-container">
                <div id="price-content">
                    <div class="anchor" id="ExtLink"></div><h1 id="header-light">External Links</h1>
                    
                </div>
                <div id="main">
                    <h2 id="header-light"><u>EnergyWatch</u></h2>
                    <p id="text-light">This website is the ASDL EnergyWatch homepage. It is a repository of various energy efficiency, building management, and other environmental analysis projects. Scroll around, or click the "About Us" button (external redirect) to learn more. </p>
                    <div id = "mid-buffer"></div>
                </div>
                <div id="thingspeakcharts">
                    <embed src="https://energywatch.gatech.edu/" style="width:100%; height: 500px;">
                </div>
                <div id = "mid-buffer"></div>
                <div id = "mid-buffer"></div>
                

                <div id="main">
                    <h2 id="header-light"><u>People Counter Presentation (April 2023)</u></h2>
                    <p id="text-light">This presentation describes some of the technical information behind the people counting system, its development, and its future steps. This short presentation was given at the Kendeda Micro Grant Symposium in April of 2023.  </p>
                    <div id = "mid-buffer"></div>
                </div>
                <div id="thingspeakcharts">
                            <iframe src= "pdfs/MGP.pdf"
                width="100%"; 
                height="500"> 
        </iframe>
                </div>
                <div id = "mid-buffer"></div>
                <div id = "mid-buffer"></div>
                
                                <div id="main">
                    <h2 id="header-light"><u>Image Gallery</u></h2>
                    <p id="text-light">Scroll through this gallery to see images of the devices, their prototypes, and the development process. These photos include both early and current prototypes for the CNES and building occupancy projects.</p>
                    <div id = "mid-buffer"></div>
                </div>
                <div id="thingspeakcharts">
                    <a data-flickr-embed="true" href="https://www.flickr.com/photos/198125394@N02/albums/72177720307580911" title="ASDL IoT Gallery"><img src="https://live.staticflickr.com/65535/52826403234_83c1d2c81b_b.jpg" width="100%" height="768" alt="ASDL IoT Gallery"/></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script>
                </div>
                <div id = "mid-buffer"></div>
                <div id = "mid-buffer"></div>
                
            </div>

            <div id="cta">
                <a class="cta-button" href="index.html#home">Back to the Top!</a>
            </div>
        </div>

        <!-- Scripts that manage chart data points -->  
        <script>
            setInterval(refreshCharts, 10000)
            
            function refreshCharts(){
                getLastSignal("2027273", "LP1");
                getLastSignal("2099128", "LP2");
            }

            async function getLastSignal(channel, HTMLItem) {
                let file = "https://api.thingspeak.com/channels/" + channel + "/fields/1/last_data_age.txt";
                let myObject = await fetch(file);
                let myText = await myObject.text();
                var time = parseInt(myText);
                if (time < 1000  && time > 0){
                    str = "<i>Last Ping: T+ " + myText +"s</i>"
                } else {
                    str = "<i style=color:#EA0606;>Sensor Offline</i>"
                }
                document.getElementById(HTMLItem).innerHTML = str;
            }
        </script>
    </body>
</html>
